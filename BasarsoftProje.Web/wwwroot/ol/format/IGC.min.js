/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/format/IGC.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();import Feature from"../Feature.js";import GeometryLayout from"../geom/GeometryLayout.js";import LineString from"../geom/LineString.js";import TextFeature from"./TextFeature.js";import{get as getProjection}from"../proj.js";import{transformGeometryWithOptions}from"./Feature.js";var IGCZ={BAROMETRIC:"barometric",GPS:"gps",NONE:"none"},B_RECORD_RE=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,H_RECORD_RE=/^H.([A-Z]{3}).*?:(.*)/,HFDTE_RECORD_RE=/^HFDTE(\d{2})(\d{2})(\d{2})/,NEWLINE_RE=/\r\n|\r|\n/,IGC=function(t){function e(e){var r=t.call(this)||this,o=e||{};return r.dataProjection=getProjection("EPSG:4326"),r.altitudeMode_=o.altitudeMode?o.altitudeMode:IGCZ.NONE,r}return __extends(e,t),e.prototype.readFeatureFromText=function(t,e){var r,o,n=this.altitudeMode_,a=t.split(NEWLINE_RE),i={},s=[],u=2e3,p=0,c=1,d=-1;for(r=0,o=a.length;r<o;++r){var f=a[r],E=void 0;if("B"==f.charAt(0)){if(E=B_RECORD_RE.exec(f)){var _=parseInt(E[1],10),m=parseInt(E[2],10),I=parseInt(E[3],10),R=parseInt(E[4],10)+parseInt(E[5],10)/6e4;"S"==E[6]&&(R=-R);var l=parseInt(E[7],10)+parseInt(E[8],10)/6e4;if("W"==E[9]&&(l=-l),s.push(l,R),n!=IGCZ.NONE){var y=void 0;y=n==IGCZ.GPS?parseInt(E[11],10):n==IGCZ.BAROMETRIC?parseInt(E[12],10):0,s.push(y)}var C=Date.UTC(u,p,c,_,m,I);C<d&&(C=Date.UTC(u,p,c+1,_,m,I)),s.push(C/1e3),d=C}}else"H"==f.charAt(0)&&((E=HFDTE_RECORD_RE.exec(f))?(c=parseInt(E[1],10),p=parseInt(E[2],10)-1,u=2e3+parseInt(E[3],10)):(E=H_RECORD_RE.exec(f))&&(i[E[1]]=E[2].trim()))}if(0===s.length)return null;var O=n==IGCZ.NONE?GeometryLayout.XYM:GeometryLayout.XYZM,h=new LineString(s,O),G=new Feature(transformGeometryWithOptions(h,!1,e));return G.setProperties(i,!0),G},e.prototype.readFeaturesFromText=function(t,e){var r=this.readFeatureFromText(t,e);return r?[r]:[]},e}(TextFeature);export default IGC;
//# sourceMappingURL=/sm/bfafaa2a17fe7a405286ca5b083ab31aa4fd27fe3f5e9fdccc285a0be46166de.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/format/TopoJSON.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,t){r.__proto__=t}||function(r,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[e]=t[e])},r(t,e)};return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();import Feature from"../Feature.js";import JSONFeature from"./JSONFeature.js";import LineString from"../geom/LineString.js";import MultiLineString from"../geom/MultiLineString.js";import MultiPoint from"../geom/MultiPoint.js";import MultiPolygon from"../geom/MultiPolygon.js";import Point from"../geom/Point.js";import Polygon from"../geom/Polygon.js";import{get as getProjection}from"../proj.js";import{transformGeometryWithOptions}from"./Feature.js";var TopoJSON=function(r){function t(t){var e=r.call(this)||this,o=t||{};return e.layerName_=o.layerName,e.layers_=o.layers?o.layers:null,e.dataProjection=getProjection(o.dataProjection?o.dataProjection:"EPSG:4326"),e}return __extends(t,r),t.prototype.readFeaturesFromObject=function(r,t){if("Topology"==r.type){var e=r,o=void 0,n=null,i=null;e.transform&&(n=(o=e.transform).scale,i=o.translate);var a=e.arcs;o&&transformArcs(a,n,i);var s=[],u=e.objects,l=this.layerName_,c=void 0;for(var m in u)this.layers_&&-1==this.layers_.indexOf(m)||("GeometryCollection"===u[m].type?(c=u[m],s.push.apply(s,readFeaturesFromGeometryCollection(c,a,n,i,l,m,t))):(c=u[m],s.push(readFeatureFromGeometry(c,a,n,i,l,m,t))));return s}return[]},t.prototype.readProjectionFromObject=function(r){return this.dataProjection},t}(JSONFeature),GEOMETRY_READERS={Point:readPointGeometry,LineString:readLineStringGeometry,Polygon:readPolygonGeometry,MultiPoint:readMultiPointGeometry,MultiLineString:readMultiLineStringGeometry,MultiPolygon:readMultiPolygonGeometry};function concatenateArcs(r,t){for(var e,o=[],n=0,i=r.length;n<i;++n)if(e=r[n],n>0&&o.pop(),e>=0)for(var a=0,s=(u=t[e]).length;a<s;++a)o.push(u[a].slice(0));else{var u;for(a=(u=t[~e]).length-1;a>=0;--a)o.push(u[a].slice(0))}return o}function readPointGeometry(r,t,e){var o=r.coordinates;return t&&e&&transformVertex(o,t,e),new Point(o)}function readMultiPointGeometry(r,t,e){var o=r.coordinates;if(t&&e)for(var n=0,i=o.length;n<i;++n)transformVertex(o[n],t,e);return new MultiPoint(o)}function readLineStringGeometry(r,t){var e=concatenateArcs(r.arcs,t);return new LineString(e)}function readMultiLineStringGeometry(r,t){for(var e=[],o=0,n=r.arcs.length;o<n;++o)e[o]=concatenateArcs(r.arcs[o],t);return new MultiLineString(e)}function readPolygonGeometry(r,t){for(var e=[],o=0,n=r.arcs.length;o<n;++o)e[o]=concatenateArcs(r.arcs[o],t);return new Polygon(e)}function readMultiPolygonGeometry(r,t){for(var e=[],o=0,n=r.arcs.length;o<n;++o){for(var i=r.arcs[o],a=[],s=0,u=i.length;s<u;++s)a[s]=concatenateArcs(i[s],t);e[o]=a}return new MultiPolygon(e)}function readFeaturesFromGeometryCollection(r,t,e,o,n,i,a){for(var s=r.geometries,u=[],l=0,c=s.length;l<c;++l)u[l]=readFeatureFromGeometry(s[l],t,e,o,n,i,a);return u}function readFeatureFromGeometry(r,t,e,o,n,i,a){var s=null,u=r.type;if(u){var l=GEOMETRY_READERS[u];s="Point"===u||"MultiPoint"===u?l(r,e,o):l(r,t),s=transformGeometryWithOptions(s,!1,a)}var c=new Feature({geometry:s});void 0!==r.id&&c.setId(r.id);var m=r.properties;return n&&(m||(m={}),m[n]=i),m&&c.setProperties(m,!0),c}function transformArcs(r,t,e){for(var o=0,n=r.length;o<n;++o)transformArc(r[o],t,e)}function transformArc(r,t,e){for(var o=0,n=0,i=0,a=r.length;i<a;++i){var s=r[i];o+=s[0],n+=s[1],s[0]=o,s[1]=n,transformVertex(s,t,e)}}function transformVertex(r,t,e){r[0]=r[0]*t[0]+e[0],r[1]=r[1]*t[1]+e[1]}export default TopoJSON;
//# sourceMappingURL=/sm/f97bd4777548db2876159564bc516db61aed9f855e147a6154a31c392534ab17.map
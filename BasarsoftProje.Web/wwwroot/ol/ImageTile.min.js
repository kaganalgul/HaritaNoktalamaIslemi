/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/ImageTile.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();import Tile from"./Tile.js";import TileState from"./TileState.js";import{createCanvasContext2D}from"./dom.js";import{listenImage}from"./Image.js";var ImageTile=function(t){function e(e,i,n,a,s,o){var r=t.call(this,e,i,o)||this;return r.crossOrigin_=a,r.src_=n,r.key=n,r.image_=new Image,null!==a&&(r.image_.crossOrigin=a),r.unlisten_=null,r.tileLoadFunction_=s,r}return __extends(e,t),e.prototype.getImage=function(){return this.image_},e.prototype.setImage=function(t){this.image_=t,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()},e.prototype.handleImageError_=function(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()},e.prototype.handleImageLoad_=function(){var t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()},e.prototype.load=function(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}(Tile);function getBlankImage(){var t=createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}export default ImageTile;
//# sourceMappingURL=/sm/a244be9e4c16d55b41af1467cd4e5659152bdf5d0cb53578fdf6567ffc4fdb8f.map
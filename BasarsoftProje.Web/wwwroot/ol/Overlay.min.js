/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/Overlay.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();import BaseObject from"./Object.js";import MapEventType from"./MapEventType.js";import OverlayPositioning from"./OverlayPositioning.js";import{CLASS_SELECTABLE}from"./css.js";import{containsExtent}from"./extent.js";import{listen,unlistenByKey}from"./events.js";import{outerHeight,outerWidth,removeChildren,removeNode}from"./dom.js";var Property={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},Overlay=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+CLASS_SELECTABLE,n.element.style.position="absolute",n.element.style.pointerEvents="auto";var i=e.autoPan;return i&&"object"!=typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(Property.ELEMENT,n.handleElementChanged),n.addChangeListener(Property.MAP,n.handleMapChanged),n.addChangeListener(Property.OFFSET,n.handleOffsetChanged),n.addChangeListener(Property.POSITION,n.handlePositionChanged),n.addChangeListener(Property.POSITIONING,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:OverlayPositioning.TOP_LEFT),void 0!==e.position&&n.setPosition(e.position),n}return __extends(e,t),e.prototype.getElement=function(){return this.get(Property.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(Property.MAP)},e.prototype.getOffset=function(){return this.get(Property.OFFSET)},e.prototype.getPosition=function(){return this.get(Property.POSITION)},e.prototype.getPositioning=function(){return this.get(Property.POSITIONING)},e.prototype.handleElementChanged=function(){removeChildren(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=listen(t,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(Property.ELEMENT,t)},e.prototype.setMap=function(t){this.set(Property.MAP,t)},e.prototype.setOffset=function(t){this.set(Property.OFFSET,t)},e.prototype.setPosition=function(t){this.set(Property.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(Property.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[outerWidth(i),outerHeight(i)]),r=t||{},s=void 0===r.margin?20:r.margin;if(!containsExtent(n,o)){var a=o[0]-n[0],p=n[2]-o[2],l=o[1]-n[1],d=n[3]-o[3],h=[0,0];if(a<0?h[0]=a-s:p<0&&(h[0]=Math.abs(p)+s),l<0?h[1]=l-s:d<0&&(h[1]=Math.abs(d)+s),0!==h[0]||0!==h[1]){var P=e.getView().getCenterInternal(),g=e.getPixelFromCoordinateInternal(P);if(!g)return;var u=[g[0]+h[0],g[1]+h[1]],y=r.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(u),duration:y.duration,easing:y.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(Property.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+i[0])+"px",s=Math.round(t[1]+i[1])+"px",a="0%",p="0%";o==OverlayPositioning.BOTTOM_RIGHT||o==OverlayPositioning.CENTER_RIGHT||o==OverlayPositioning.TOP_RIGHT?a="-100%":o!=OverlayPositioning.BOTTOM_CENTER&&o!=OverlayPositioning.CENTER_CENTER&&o!=OverlayPositioning.TOP_CENTER||(a="-50%"),o==OverlayPositioning.BOTTOM_LEFT||o==OverlayPositioning.BOTTOM_CENTER||o==OverlayPositioning.BOTTOM_RIGHT?p="-100%":o!=OverlayPositioning.CENTER_LEFT&&o!=OverlayPositioning.CENTER_CENTER&&o!=OverlayPositioning.CENTER_RIGHT||(p="-50%");var l="translate("+a+", "+p+") translate("+r+", "+s+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(BaseObject);export default Overlay;
//# sourceMappingURL=/sm/8a218488ccb5678d3c36398d05e67db4d7ad8920c02e2dfa337e5f9dbd084708.map
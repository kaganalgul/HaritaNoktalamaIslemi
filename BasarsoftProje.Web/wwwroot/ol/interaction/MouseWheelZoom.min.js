/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/interaction/MouseWheelZoom.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(o,e){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},t(o,e)};return function(o,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=o}t(o,e),o.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();import EventType from"../events/EventType.js";import Interaction,{zoomByDelta}from"./Interaction.js";import{DEVICE_PIXEL_RATIO,FIREFOX}from"../has.js";import{all,always,focusWithTabindex}from"../events/condition.js";import{clamp}from"../math.js";export var Mode={TRACKPAD:"trackpad",WHEEL:"wheel"};var MouseWheelZoom=function(t){function o(o){var e=this,i=o||{};(e=t.call(this,i)||this).totalDelta_=0,e.lastDelta_=0,e.maxDelta_=void 0!==i.maxDelta?i.maxDelta:1,e.duration_=void 0!==i.duration?i.duration:250,e.timeout_=void 0!==i.timeout?i.timeout:80,e.useAnchor_=void 0===i.useAnchor||i.useAnchor,e.constrainResolution_=void 0!==i.constrainResolution&&i.constrainResolution;var n=i.condition?i.condition:always;return e.condition_=i.onFocusOnly?all(focusWithTabindex,n):n,e.lastAnchor_=null,e.startTime_=void 0,e.timeoutId_,e.mode_=void 0,e.trackpadEventGap_=400,e.trackpadTimeoutId_,e.deltaPerZoom_=300,e}return __extends(o,t),o.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0,this.getMap().getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)},o.prototype.handleEvent=function(t){if(!this.condition_(t))return!0;if(t.type!==EventType.WHEEL)return!0;var o,e=t.map,i=t.originalEvent;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==EventType.WHEEL&&(o=i.deltaY,FIREFOX&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=DEVICE_PIXEL_RATIO),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),0===o)return!1;this.lastDelta_=o;var n=Date.now();void 0===this.startTime_&&(this.startTime_=n),(!this.mode_||n-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?Mode.TRACKPAD:Mode.WHEEL);var a=e.getView();if(this.mode_===Mode.TRACKPAD&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=n,!1;this.totalDelta_+=o;var s=Math.max(this.timeout_-(n-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),s),!1},o.prototype.handleWheelZoom_=function(t){var o=t.getView();o.getAnimating()&&o.cancelAnimations();var e=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(o.getConstrainResolution()||this.constrainResolution_)&&(e=e?e>0?1:-1:0),zoomByDelta(o,e,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},o.prototype.setMouseAnchor=function(t){this.useAnchor_=t,t||(this.lastAnchor_=null)},o}(Interaction);export default MouseWheelZoom;
//# sourceMappingURL=/sm/50802908a6722fdcc5cfcf29e9ba0f9c6239227f79c993209819df47e515d7e3.map
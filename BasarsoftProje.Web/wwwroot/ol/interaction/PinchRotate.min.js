/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/interaction/PinchRotate.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(n,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])},t(n,o)};return function(n,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=n}t(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}}();import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";import{FALSE}from"../functions.js";import{disable}from"../rotationconstraint.js";var PinchRotate=function(t){function n(n){var o=this,e=n||{},r=e;return r.stopDown||(r.stopDown=FALSE),(o=t.call(this,r)||this).anchor_=null,o.lastAngle_=void 0,o.rotating_=!1,o.rotationDelta_=0,o.threshold_=void 0!==e.threshold?e.threshold:.3,o.duration_=void 0!==e.duration?e.duration:250,o}return __extends(n,t),n.prototype.handleDragEvent=function(t){var n=0,o=this.targetPointers[0],e=this.targetPointers[1],r=Math.atan2(e.clientY-o.clientY,e.clientX-o.clientX);if(void 0!==this.lastAngle_){var i=r-this.lastAngle_;this.rotationDelta_+=i,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=i}this.lastAngle_=r;var a=t.map,s=a.getView();if(s.getConstraints().rotation!==disable){var h=a.getViewport().getBoundingClientRect(),l=centroidFromPointers(this.targetPointers);l[0]-=h.left,l[1]-=h.top,this.anchor_=a.getCoordinateFromPixelInternal(l),this.rotating_&&(a.render(),s.adjustRotationInternal(n,this.anchor_))}},n.prototype.handleUpEvent=function(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)},n.prototype.handleDownEvent=function(t){if(this.targetPointers.length>=2){var n=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1},n}(PointerInteraction);export default PinchRotate;
//# sourceMappingURL=/sm/f908426fa5421df852f543aeb81566ffdce235da1eb6d70a66a8ddec93aae728.map
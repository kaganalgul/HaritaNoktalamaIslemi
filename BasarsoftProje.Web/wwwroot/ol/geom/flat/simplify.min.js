/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/geom/flat/simplify.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{squaredDistance,squaredSegmentDistance}from"../../math.js";export function simplifyLineString(r,e,n,a,t,u,o){var i=void 0!==o?o:[];return u||(n=radialDistance(r,e,n,a,t,i,0),r=i,e=0,a=2),i.length=douglasPeucker(r,e,n,a,t,i,0),i}export function douglasPeucker(r,e,n,a,t,u,o){var i=(n-e)/a;if(i<3){for(;e<n;e+=a)u[o++]=r[e],u[o++]=r[e+1];return o}var s=new Array(i);s[0]=1,s[i-1]=1;for(var p=[e,n-a],f=0;p.length>0;){for(var c=p.pop(),l=p.pop(),v=0,g=r[l],h=r[l+1],d=r[c],q=r[c+1],x=l+a;x<c;x+=a){var y=r[x],A=r[x+1],k=squaredSegmentDistance(y,A,g,h,d,q);k>v&&(f=x,v=k)}v>t&&(s[(f-e)/a]=1,l+a<f&&p.push(l,f),f+a<c&&p.push(f,c))}for(x=0;x<i;++x)s[x]&&(u[o++]=r[e+x*a],u[o++]=r[e+x*a+1]);return o}export function douglasPeuckerArray(r,e,n,a,t,u,o,i){for(var s=0,p=n.length;s<p;++s){var f=n[s];o=douglasPeucker(r,e,f,a,t,u,o),i.push(o),e=f}return o}export function douglasPeuckerMultiArray(r,e,n,a,t,u,o,i){for(var s=0,p=n.length;s<p;++s){var f=n[s],c=[];o=douglasPeuckerArray(r,e,f,a,t,u,o,c),i.push(c),e=f[f.length-1]}return o}export function radialDistance(r,e,n,a,t,u,o){if(n<=e+a){for(;e<n;e+=a)u[o++]=r[e],u[o++]=r[e+1];return o}var i=r[e],s=r[e+1];u[o++]=i,u[o++]=s;var p=i,f=s;for(e+=a;e<n;e+=a)p=r[e],f=r[e+1],squaredDistance(i,s,p,f)>t&&(u[o++]=p,u[o++]=f,i=p,s=f);return p==i&&f==s||(u[o++]=p,u[o++]=f),o}export function snap(r,e){return e*Math.round(r/e)}export function quantize(r,e,n,a,t,u,o){if(e==n)return o;var i,s,p=snap(r[e],t),f=snap(r[e+1],t);e+=a,u[o++]=p,u[o++]=f;do{if(i=snap(r[e],t),s=snap(r[e+1],t),(e+=a)==n)return u[o++]=i,u[o++]=s,o}while(i==p&&s==f);for(;e<n;){var c=snap(r[e],t),l=snap(r[e+1],t);if(e+=a,c!=i||l!=s){var v=i-p,g=s-f,h=c-p,d=l-f;v*d==g*h&&(v<0&&h<v||v==h||v>0&&h>v)&&(g<0&&d<g||g==d||g>0&&d>g)?(i=c,s=l):(u[o++]=i,u[o++]=s,p=i,f=s,i=c,s=l)}}return u[o++]=i,u[o++]=s,o}export function quantizeArray(r,e,n,a,t,u,o,i){for(var s=0,p=n.length;s<p;++s){var f=n[s];o=quantize(r,e,f,a,t,u,o),i.push(o),e=f}return o}export function quantizeMultiArray(r,e,n,a,t,u,o,i){for(var s=0,p=n.length;s<p;++s){var f=n[s],c=[];o=quantizeArray(r,e,f,a,t,u,o,c),i.push(c),e=f[f.length-1]}return o}
//# sourceMappingURL=/sm/078e34410b9a1f5b7e6e0af7e86e60740ae1744bfea3d99590fcd9174e66a12b.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/layer/Group.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();import BaseLayer from"./Base.js";import Collection from"../Collection.js";import CollectionEventType from"../CollectionEventType.js";import Event from"../events/Event.js";import EventType from"../events/EventType.js";import ObjectEventType from"../ObjectEventType.js";import SourceState from"../source/State.js";import{assert}from"../asserts.js";import{assign,clear}from"../obj.js";import{getIntersection}from"../extent.js";import{getUid}from"../util.js";import{listen,unlistenByKey}from"../events.js";var GroupEvent=function(e){function t(t,r){var n=e.call(this,t)||this;return n.layer=r,n}return __extends(t,e),t}(Event);export{GroupEvent};var Property={LAYERS:"layers"},LayerGroup=function(e){function t(t){var r=this,n=t||{},o=assign({},n);delete o.layers;var s=n.layers;return(r=e.call(this,o)||this).on,r.once,r.un,r.layersListenerKeys_=[],r.listenerKeys_={},r.addChangeListener(Property.LAYERS,r.handleLayersChanged_),s?Array.isArray(s)?s=new Collection(s.slice(),{unique:!0}):assert("function"==typeof s.getArray,43):s=new Collection(void 0,{unique:!0}),r.setLayers(s),r}return __extends(t,e),t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;var e=this.getLayers();for(var t in this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this)),this.listenerKeys_)this.listenerKeys_[t].forEach(unlistenByKey);clear(this.listenerKeys_);for(var r=e.getArray(),n=0,o=r.length;n<o;n++){var s=r[n];this.registerLayerListeners_(s),this.dispatchEvent(new GroupEvent("addlayer",s))}this.changed()},t.prototype.registerLayerListeners_=function(e){var r=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof t&&r.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=r},t.prototype.handleLayerGroupAdd_=function(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))},t.prototype.handleLayerGroupRemove_=function(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))},t.prototype.handleLayersAdd_=function(e){var t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()},t.prototype.handleLayersRemove_=function(e){var t=e.element,r=getUid(t);this.listenerKeys_[r].forEach(unlistenByKey),delete this.listenerKeys_[r],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()},t.prototype.getLayers=function(){return this.get(Property.LAYERS)},t.prototype.setLayers=function(e){var t=this.getLayers();if(t)for(var r=t.getArray(),n=0,o=r.length;n<o;++n)this.dispatchEvent(new GroupEvent("removelayer",r[n]));this.set(Property.LAYERS,e)},t.prototype.getLayersArray=function(e){var t=void 0!==e?e:[];return this.getLayers().forEach((function(e){e.getLayersArray(t)})),t},t.prototype.getLayerStatesArray=function(e){var t=void 0!==e?e:[],r=t.length;this.getLayers().forEach((function(e){e.getLayerStatesArray(t)}));var n=this.getLayerState(),o=n.zIndex;e||void 0!==n.zIndex||(o=0);for(var s=r,i=t.length;s<i;s++){var a=t[s];a.opacity*=n.opacity,a.visible=a.visible&&n.visible,a.maxResolution=Math.min(a.maxResolution,n.maxResolution),a.minResolution=Math.max(a.minResolution,n.minResolution),a.minZoom=Math.max(a.minZoom,n.minZoom),a.maxZoom=Math.min(a.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==a.extent?a.extent=getIntersection(a.extent,n.extent):a.extent=n.extent),void 0===a.zIndex&&(a.zIndex=o)}return t},t.prototype.getSourceState=function(){return SourceState.READY},t}(BaseLayer);export default LayerGroup;
//# sourceMappingURL=/sm/cb18562fd2b24bad561a045c765b292d1d7fd71b708f99f842a8e75c11f6adf4.map
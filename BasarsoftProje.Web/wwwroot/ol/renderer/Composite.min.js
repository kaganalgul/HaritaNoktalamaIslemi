/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/renderer/Composite.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();import MapRenderer from"./Map.js";import ObjectEventType from"../ObjectEventType.js";import RenderEvent from"../render/Event.js";import RenderEventType from"../render/EventType.js";import SourceState from"../source/State.js";import{CLASS_UNSELECTABLE}from"../css.js";import{checkedFonts}from"../render/canvas.js";import{inView}from"../layer/Layer.js";import{listen,unlistenByKey}from"../events.js";import{replaceChildren}from"../dom.js";var CompositeMapRenderer=function(e){function t(t){var r=e.call(this,t)||this;r.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,t.redrawText.bind(t)),r.element_=document.createElement("div");var n=r.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",r.element_.className=CLASS_UNSELECTABLE+" ol-layers";var i=t.getViewport();return i.insertBefore(r.element_,i.firstChild||null),r.children_=[],r.renderedVisible_=!0,r}return __extends(t,e),t.prototype.dispatchRenderEvent=function(e,t){var r=this.getMap();if(r.hasListener(e)){var n=new RenderEvent(e,void 0,t);r.dispatchEvent(n)}},t.prototype.disposeInternal=function(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(e){if(e){this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);var t=e.layerStatesArray.sort((function(e,t){return e.zIndex-t.zIndex})),r=e.viewState;this.children_.length=0;for(var n=[],i=null,o=0,s=t.length;o<s;++o){var a=t[o];if(e.layerIndex=o,inView(a,r)&&(a.sourceState==SourceState.READY||a.sourceState==SourceState.UNDEFINED)){var l=a.layer,d=l.render(e,i);d&&(d!==i&&(this.children_.push(d),i=d),"getDeclutter"in l&&n.push(l))}}for(o=n.length-1;o>=0;--o)n[o].renderDeclutter(e);replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}else this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1)},t.prototype.forEachLayerAtPixel=function(e,t,r,n,i){for(var o=t.viewState,s=t.layerStatesArray,a=s.length-1;a>=0;--a){var l=s[a],d=l.layer;if(d.hasRenderer()&&inView(l,o)&&i(d)){var p=d.getRenderer().getDataAtPixel(e,t,r);if(p){var c=n(d,p);if(c)return c}}}},t}(MapRenderer);export default CompositeMapRenderer;
//# sourceMappingURL=/sm/093083d164e7ab08cee8070b2f4990b8af11334ca4585c2b119ff184e67c38b8.map
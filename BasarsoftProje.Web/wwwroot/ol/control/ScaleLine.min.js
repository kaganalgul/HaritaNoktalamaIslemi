/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/control/ScaleLine.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();import Control from"./Control.js";import ProjUnits from"../proj/Units.js";import{CLASS_UNSELECTABLE}from"../css.js";import{METERS_PER_UNIT,getPointResolution}from"../proj.js";import{assert}from"../asserts.js";var UNITS_PROP="units";export var Units={DEGREES:"degrees",IMPERIAL:"imperial",NAUTICAL:"nautical",METRIC:"metric",US:"us"};var LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28,ScaleLine=function(e){function t(t){var i=this,r=t||{},n=void 0!==r.className?r.className:r.bar?"ol-scale-bar":"ol-scale-line";return(i=e.call(this,{element:document.createElement("div"),render:r.render,target:r.target})||this).on,i.once,i.un,i.innerElement_=document.createElement("div"),i.innerElement_.className=n+"-inner",i.element.className=n+" "+CLASS_UNSELECTABLE,i.element.appendChild(i.innerElement_),i.viewState_=null,i.minWidth_=void 0!==r.minWidth?r.minWidth:64,i.renderedVisible_=!1,i.renderedWidth_=void 0,i.renderedHTML_="",i.addChangeListener(UNITS_PROP,i.handleUnitsChanged_),i.setUnits(r.units||Units.METRIC),i.scaleBar_=r.bar||!1,i.scaleBarSteps_=r.steps||4,i.scaleBarText_=r.text||!1,i.dpi_=r.dpi||void 0,i}return __extends(t,e),t.prototype.getUnits=function(){return this.get(UNITS_PROP)},t.prototype.handleUnitsChanged_=function(){this.updateElement_()},t.prototype.setUnits=function(e){this.set(UNITS_PROP,e)},t.prototype.setDpi=function(e){this.dpi_=e},t.prototype.updateElement_=function(){var e=this.viewState_;if(e){var t=e.center,i=e.projection,r=this.getUnits(),n=r==Units.DEGREES?ProjUnits.DEGREES:ProjUnits.METERS,s=getPointResolution(i,e.resolution,t,n),o=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,a=o*s,l="";if(r==Units.DEGREES){var d=METERS_PER_UNIT[ProjUnits.DEGREES];(a*=d)<d/60?(l="″",s*=3600):a<d?(l="′",s*=60):l="°"}else r==Units.IMPERIAL?a<.9144?(l="in",s/=.0254):a<1609.344?(l="ft",s/=.3048):(l="mi",s/=1609.344):r==Units.NAUTICAL?(s/=1852,l="nm"):r==Units.METRIC?a<.001?(l="μm",s*=1e6):a<1?(l="mm",s*=1e3):a<1e3?l="m":(l="km",s/=1e3):r==Units.US?a<.9144?(l="in",s*=39.37):a<1609.344?(l="ft",s/=.30480061):(l="mi",s/=1609.3472):assert(!1,33);for(var p,c,h,_,u=3*Math.floor(Math.log(o*s)/Math.log(10));;){h=Math.floor(u/3);var f=Math.pow(10,h);if(p=LEADING_DIGITS[(u%3+3)%3]*f,c=Math.round(p/s),isNaN(c))return this.element.style.display="none",void(this.renderedVisible_=!1);if(c>=o)break;++u}_=this.scaleBar_?this.createScaleBar(c,p,l):p.toFixed(h<0?-h:0)+" "+l,this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=c&&(this.innerElement_.style.width=c+"px",this.renderedWidth_=c),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},t.prototype.createScaleBar=function(e,t,i){for(var r="1 : "+Math.round(this.getScaleForResolution()).toLocaleString(),n=[],s=e/this.scaleBarSteps_,o="#ffffff",a=0;a<this.scaleBarSteps_;a++)0===a&&n.push(this.createMarker("absolute",a)),n.push('<div><div class="ol-scale-singlebar" style="width: '+s+"px;background-color: "+o+';"></div>'+this.createMarker("relative",a)+(a%2==0||2===this.scaleBarSteps_?this.createStepText(a,e,!1,t,i):"")+"</div>"),a===this.scaleBarSteps_-1&&n.push(this.createStepText(a+1,e,!0,t,i)),o="#ffffff"===o?"#000000":"#ffffff";return'<div style="display: flex;">'+(this.scaleBarText_?'<div class="ol-scale-text" style="width: '+e+'px;">'+r+"</div>":"")+n.join("")+"</div>"},t.prototype.createMarker=function(e,t){return'<div class="ol-scale-step-marker" style="position: '+e+";top: "+("absolute"===e?3:-10)+'px;"></div>'},t.prototype.createStepText=function(e,t,i,r,n){var s=(0===e?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(0===e?"":" "+n);return'<div class="ol-scale-step-text" style="margin-left: '+(0===e?-3:t/this.scaleBarSteps_*-1)+"px;text-align: "+(0===e?"left":"center")+"; min-width: "+(0===e?0:t/this.scaleBarSteps_*2)+"px;left: "+(i?t+"px":"unset")+';">'+s+"</div>"},t.prototype.getScaleForResolution=function(){var e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,ProjUnits.METERS),t=this.dpi_||DEFAULT_DPI;return parseFloat(e.toString())*(1e3/25.4)*t},t.prototype.render=function(e){var t=e.frameState;this.viewState_=t?t.viewState:null,this.updateElement_()},t}(Control);export default ScaleLine;
//# sourceMappingURL=/sm/97ab58f86c1fcc1feacd2b62eaa41a0826cb2994a0315cb33afb386e8eb59838.map
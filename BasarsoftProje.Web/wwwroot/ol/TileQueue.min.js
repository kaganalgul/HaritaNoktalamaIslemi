/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/TileQueue.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();import EventType from"./events/EventType.js";import PriorityQueue,{DROP}from"./structs/PriorityQueue.js";import TileState from"./TileState.js";var TileQueue=function(e){function t(t,n){var i=e.call(this,(function(e){return t.apply(null,e)}),(function(e){return e[0].getKey()}))||this;return i.boundHandleTileChange_=i.handleTileChange.bind(i),i.tileChangeCallback_=n,i.tilesLoading_=0,i.tilesLoadingKeys_={},i}return __extends(t,e),t.prototype.enqueue=function(t){var n=e.prototype.enqueue.call(this,t);n&&t[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_);return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(e){var t=e.target,n=t.getState();if(n===TileState.LOADED||n===TileState.ERROR||n===TileState.EMPTY){t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);var i=t.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(e,t){for(var n,i,o=0;this.tilesLoading_<e&&o<t&&this.getCount()>0;)i=(n=this.dequeue()[0]).getKey(),n.getState()!==TileState.IDLE||i in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[i]=!0,++this.tilesLoading_,++o,n.load())},t}(PriorityQueue);export default TileQueue;export function getTilePriority(e,t,n,i,o){if(!e||!(n in e.wantedTiles))return DROP;if(!e.wantedTiles[n][t.getKey()])return DROP;var r=e.viewState.center,a=i[0]-r[0],l=i[1]-r[1];return 65536*Math.log(o)+Math.sqrt(a*a+l*l)/o}
//# sourceMappingURL=/sm/bd4766be9b5eea4cf2ca48fd13d9cddf5e692dda8b75546bfe7fd05c0a812f71.map
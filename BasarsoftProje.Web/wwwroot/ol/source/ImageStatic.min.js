/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/source/ImageStatic.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();import EventType from"../events/EventType.js";import ImageSource,{defaultImageLoadFunction}from"./Image.js";import ImageState from"../ImageState.js";import ImageWrapper from"../Image.js";import{IMAGE_SMOOTHING_DISABLED}from"../renderer/canvas/common.js";import{assign}from"../obj.js";import{createCanvasContext2D}from"../dom.js";import{getHeight,getWidth,intersects}from"../extent.js";import{get as getProjection}from"../proj.js";var Static=function(t){function e(e){var i=this,o=void 0!==e.crossOrigin?e.crossOrigin:null,n=void 0!==e.imageLoadFunction?e.imageLoadFunction:defaultImageLoadFunction,r=void 0===e.imageSmoothing||e.imageSmoothing;return void 0!==e.interpolate&&(r=e.interpolate),(i=t.call(this,{attributions:e.attributions,interpolate:r,projection:getProjection(e.projection)})||this).url_=e.url,i.imageExtent_=e.imageExtent,i.image_=new ImageWrapper(i.imageExtent_,void 0,1,i.url_,o,n),i.imageSize_=e.imageSize?e.imageSize:null,i.image_.addEventListener(EventType.CHANGE,i.handleImageChange.bind(i)),i}return __extends(e,t),e.prototype.getImageExtent=function(){return this.imageExtent_},e.prototype.getImageInternal=function(t,e,i,o){return intersects(t,this.image_.getExtent())?this.image_:null},e.prototype.getUrl=function(){return this.url_},e.prototype.handleImageChange=function(e){if(this.image_.getState()==ImageState.LOADED){var i=this.image_.getExtent(),o=this.image_.getImage(),n=void 0,r=void 0;this.imageSize_?(n=this.imageSize_[0],r=this.imageSize_[1]):(n=o.width,r=o.height);var a=getWidth(i),g=getHeight(i),m=a/n,s=g/r,p=n,c=r;if(m>s?p=Math.round(a/s):c=Math.round(g/m),p!==n||c!==r){var u=createCanvasContext2D(p,c);this.getInterpolate()||assign(u,IMAGE_SMOOTHING_DISABLED);var h=u.canvas;u.drawImage(o,0,0,n,r,0,0,h.width,h.height),this.image_.setImage(h)}}t.prototype.handleImageChange.call(this,e)},e}(ImageSource);export default Static;
//# sourceMappingURL=/sm/b01337bc2ba4527ed8e7c3c0e4914c4eb85eb2a769e82e3d7f83e1113c6a72e2.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/source/TileArcGISRest.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}();import TileImage from"./TileImage.js";import{appendParams}from"../uri.js";import{assign}from"../obj.js";import{createEmpty}from"../extent.js";import{modulo}from"../math.js";import{scale as scaleSize,toSize}from"../size.js";import{hash as tileCoordHash}from"../tilecoord.js";var TileArcGISRest=function(t){function e(e){var r=this,i=e||{},o=void 0===i.imageSmoothing||i.imageSmoothing;return void 0!==i.interpolate&&(o=i.interpolate),(r=t.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,interpolate:o,projection:i.projection,reprojectionErrorThreshold:i.reprojectionErrorThreshold,tileGrid:i.tileGrid,tileLoadFunction:i.tileLoadFunction,url:i.url,urls:i.urls,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection})||this).params_=i.params||{},r.hidpi_=void 0===i.hidpi||i.hidpi,r.tmpExtent_=createEmpty(),r.setKey(r.getKeyForParams_()),r}return __extends(e,t),e.prototype.getKeyForParams_=function(){var t=0,e=[];for(var r in this.params_)e[t++]=r+"-"+this.params_[r];return e.join("/")},e.prototype.getParams=function(){return this.params_},e.prototype.getRequestUrl_=function(t,e,r,i,o,n){var a=this.urls;if(a){var s,p=o.getCode().split(/:(?=\d+$)/).pop();if(n.SIZE=e[0]+","+e[1],n.BBOX=r.join(","),n.BBOXSR=p,n.IMAGESR=p,n.DPI=Math.round(n.DPI?n.DPI*i:90*i),1==a.length)s=a[0];else s=a[modulo(tileCoordHash(t),a.length)];var l=s.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return appendParams(l,n)}},e.prototype.getTilePixelRatio=function(t){return this.hidpi_?t:1},e.prototype.updateParams=function(t){assign(this.params_,t),this.setKey(this.getKeyForParams_())},e.prototype.tileUrlFunction=function(t,e,r){var i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(r)),!(i.getResolutions().length<=t[0])){1==e||this.hidpi_||(e=1);var o=i.getTileCoordExtent(t,this.tmpExtent_),n=toSize(i.getTileSize(t[0]),this.tmpSize);1!=e&&(n=scaleSize(n,e,this.tmpSize));var a={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return assign(a,this.params_),this.getRequestUrl_(t,n,o,e,r,a)}},e}(TileImage);export default TileArcGISRest;
//# sourceMappingURL=/sm/88d1cfa183aac82dbfa42dd352b546c409b3996882116619bb71f61a13ff46ac.map
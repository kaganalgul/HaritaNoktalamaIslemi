/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/source/Image.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function o(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();import Event from"../events/Event.js";import ImageState from"../ImageState.js";import ReprojImage from"../reproj/Image.js";import Source from"./Source.js";import{ENABLE_RASTER_REPROJECTION}from"../reproj/common.js";import{abstract}from"../util.js";import{equals}from"../extent.js";import{equivalent}from"../proj.js";import{linearFindNearest}from"../array.js";export var ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};var ImageSourceEvent=function(e){function t(t,r){var o=e.call(this,t)||this;return o.image=r,o}return __extends(t,e),t}(Event);export{ImageSourceEvent};var ImageSource=function(e){function t(t){var r=this,o=void 0===t.imageSmoothing||t.imageSmoothing;return void 0!==t.interpolate&&(o=t.interpolate),(r=e.call(this,{attributions:t.attributions,projection:t.projection,state:t.state,interpolate:o})||this).on,r.once,r.un,r.resolutions_=void 0!==t.resolutions?t.resolutions:null,r.reprojectedImage_=null,r.reprojectedRevision_=0,r}return __extends(t,e),t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.findNearestResolution=function(e){if(this.resolutions_){var t=linearFindNearest(this.resolutions_,e,0);e=this.resolutions_[t]}return e},t.prototype.getImage=function(e,t,r,o){var n=this.getProjection();if(ENABLE_RASTER_REPROJECTION&&n&&o&&!equivalent(n,o)){if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),o)&&this.reprojectedImage_.getResolution()==t&&equals(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(n,o,e,t,r,function(e,t,r){return this.getImageInternal(e,t,r,n)}.bind(this),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}return n&&(o=n),this.getImageInternal(e,t,r,o)},t.prototype.getImageInternal=function(e,t,r,o){return abstract()},t.prototype.handleImageChange=function(e){var t=e.target;switch(t.getState()){case ImageState.LOADING:this.loading=!0,this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,t));break;case ImageState.LOADED:this.loading=!1,this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,t));break;case ImageState.ERROR:this.loading=!1,this.dispatchEvent(new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,t))}},t}(Source);export function defaultImageLoadFunction(e,t){e.getImage().src=t}export default ImageSource;
//# sourceMappingURL=/sm/182c901d6a4bc2b919a96408bb4d92a630e6ca6d74c04cbfffbb61891f661be0.map
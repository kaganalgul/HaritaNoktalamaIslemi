/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/Geolocation.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var __extends=this&&this.__extends||function(){var t=function(o,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r])},t(o,r)};return function(o,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=o}t(o,r),o.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}();import BaseEvent from"./events/Event.js";import BaseObject from"./Object.js";import EventType from"./events/EventType.js";import{circular as circularPolygon}from"./geom/Polygon.js";import{get as getProjection,getTransformFromProjections,identityTransform}from"./proj.js";import{toRadians}from"./math.js";var Property={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},GeolocationError=function(t){function o(o){var r=t.call(this,EventType.ERROR)||this;return r.code=o.code,r.message=o.message,r}return __extends(o,t),o}(BaseEvent),Geolocation=function(t){function o(o){var r=t.call(this)||this;r.on,r.once,r.un;var e=o||{};return r.position_=null,r.transform_=identityTransform,r.watchId_=void 0,r.addChangeListener(Property.PROJECTION,r.handleProjectionChanged_),r.addChangeListener(Property.TRACKING,r.handleTrackingChanged_),void 0!==e.projection&&r.setProjection(e.projection),void 0!==e.trackingOptions&&r.setTrackingOptions(e.trackingOptions),r.setTracking(void 0!==e.tracking&&e.tracking),r}return __extends(o,t),o.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},o.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=getTransformFromProjections(getProjection("EPSG:4326"),t),this.position_&&this.set(Property.POSITION,this.transform_(this.position_)))},o.prototype.handleTrackingChanged_=function(){if("geolocation"in navigator){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},o.prototype.positionChange_=function(t){var o=t.coords;this.set(Property.ACCURACY,o.accuracy),this.set(Property.ALTITUDE,null===o.altitude?void 0:o.altitude),this.set(Property.ALTITUDE_ACCURACY,null===o.altitudeAccuracy?void 0:o.altitudeAccuracy),this.set(Property.HEADING,null===o.heading?void 0:toRadians(o.heading)),this.position_?(this.position_[0]=o.longitude,this.position_[1]=o.latitude):this.position_=[o.longitude,o.latitude];var r=this.transform_(this.position_);this.set(Property.POSITION,r),this.set(Property.SPEED,null===o.speed?void 0:o.speed);var e=circularPolygon(this.position_,o.accuracy);e.applyTransform(this.transform_),this.set(Property.ACCURACY_GEOMETRY,e),this.changed()},o.prototype.positionError_=function(t){this.dispatchEvent(new GeolocationError(t))},o.prototype.getAccuracy=function(){return this.get(Property.ACCURACY)},o.prototype.getAccuracyGeometry=function(){return this.get(Property.ACCURACY_GEOMETRY)||null},o.prototype.getAltitude=function(){return this.get(Property.ALTITUDE)},o.prototype.getAltitudeAccuracy=function(){return this.get(Property.ALTITUDE_ACCURACY)},o.prototype.getHeading=function(){return this.get(Property.HEADING)},o.prototype.getPosition=function(){return this.get(Property.POSITION)},o.prototype.getProjection=function(){return this.get(Property.PROJECTION)},o.prototype.getSpeed=function(){return this.get(Property.SPEED)},o.prototype.getTracking=function(){return this.get(Property.TRACKING)},o.prototype.getTrackingOptions=function(){return this.get(Property.TRACKING_OPTIONS)},o.prototype.setProjection=function(t){this.set(Property.PROJECTION,getProjection(t))},o.prototype.setTracking=function(t){this.set(Property.TRACKING,t)},o.prototype.setTrackingOptions=function(t){this.set(Property.TRACKING_OPTIONS,t)},o}(BaseObject);export default Geolocation;
//# sourceMappingURL=/sm/157109e9a82a224a4368cf22b4de758b17af2cb0931d14181395bd1a1a7448d1.map
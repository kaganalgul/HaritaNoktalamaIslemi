/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/render/canvas.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import BaseObject from"../Object.js";import EventTarget from"../events/Target.js";import{WORKER_OFFSCREEN_CANVAS}from"../has.js";import{clear}from"../obj.js";import{createCanvasContext2D}from"../dom.js";import{getFontParameters}from"../css.js";export var defaultFont="10px sans-serif";export var defaultFillStyle="#000";export var defaultLineCap="round";export var defaultLineDash=[];export var defaultLineDashOffset=0;export var defaultLineJoin="round";export var defaultMiterLimit=10;export var defaultStrokeStyle="#000";export var defaultTextAlign="center";export var defaultTextBaseline="middle";export var defaultPadding=[0,0,0,0];export var defaultLineWidth=1;export var checkedFonts=new BaseObject;export var labelCache=new EventTarget;labelCache.setSize=function(){console.warn("labelCache is deprecated.")};var measureFont,measureContext=null;export var textHeights={};export var registerFont=function(){var e,t,r="32px ",a=["monospace","serif"],n=a.length,o="wmytzilWMYTZIL@#/&?$%10";function s(e,s,i){for(var l=!0,u=0;u<n;++u){var c=a[u];if(t=measureTextWidth(e+" "+s+" "+r+c,o),i!=c){var d=measureTextWidth(e+" "+s+" "+r+i+","+c,o);l=l&&d!=t}}return!!l}function i(){for(var t=!0,r=checkedFonts.getKeys(),a=0,n=r.length;a<n;++a){var o=r[a];checkedFonts.get(o)<100&&(s.apply(this,o.split("\n"))?(clear(textHeights),measureContext=null,measureFont=void 0,checkedFonts.set(o,100)):(checkedFonts.set(o,checkedFonts.get(o)+1,!0),t=!1))}t&&(clearInterval(e),e=void 0)}return function(t){var r=getFontParameters(t);if(r)for(var a=r.families,n=0,o=a.length;n<o;++n){var l=a[n],u=r.style+"\n"+r.weight+"\n"+l;void 0===checkedFonts.get(u)&&(checkedFonts.set(u,100,!0),s(r.style,r.weight,l)||(checkedFonts.set(u,0,!0),void 0===e&&(e=setInterval(i,32))))}}}();export var measureTextHeight=function(){var e;return function(t){var r=textHeights[t];if(null==r){if(WORKER_OFFSCREEN_CANVAS){var a=getFontParameters(t),n=measureText(t,"Žg");r=(isNaN(Number(a.lineHeight))?1.2:Number(a.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else e||((e=document.createElement("div")).innerHTML="M",e.style.minHeight="0",e.style.maxHeight="none",e.style.height="auto",e.style.padding="0",e.style.border="none",e.style.position="absolute",e.style.display="block",e.style.left="-99999px"),e.style.font=t,document.body.appendChild(e),r=e.offsetHeight,document.body.removeChild(e);textHeights[t]=r}return r}}();function measureText(e,t){return measureContext||(measureContext=createCanvasContext2D(1,1)),e!=measureFont&&(measureContext.font=e,measureFont=measureContext.font),measureContext.measureText(t)}export function measureTextWidth(e,t){return measureText(e,t).width}export function measureAndCacheTextWidth(e,t,r){if(t in r)return r[t];var a=measureTextWidth(e,t);return r[t]=a,a}export function measureTextWidths(e,t,r){for(var a=t.length,n=0,o=0;o<a;++o){var s=measureTextWidth(e,t[o]);n=Math.max(n,s),r.push(s)}return n}export function rotateAtOffset(e,t,r,a){0!==t&&(e.translate(r,a),e.rotate(t),e.translate(-r,-a))}export function drawImageOrLabel(e,t,r,a,n,o,s,i,l,u,c){e.save(),1!==r&&(e.globalAlpha*=r),t&&e.setTransform.apply(e,t),a.contextInstructions?(e.translate(l,u),e.scale(c[0],c[1]),executeLabelInstructions(a,e)):c[0]<0||c[1]<0?(e.translate(l,u),e.scale(c[0],c[1]),e.drawImage(a,n,o,s,i,0,0,s,i)):e.drawImage(a,n,o,s,i,l,u,s*c[0],i*c[1]),e.restore()}function executeLabelInstructions(e,t){for(var r=e.contextInstructions,a=0,n=r.length;a<n;a+=2)Array.isArray(r[a+1])?t[r[a]].apply(t,r[a+1]):t[r[a]]=r[a+1]}
//# sourceMappingURL=/sm/9826c4768c30eff01546891fea82748a51c6019482988c76409e7ac346198005.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/control/Attribution.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Control from"./Control.js";import EventType from"../events/EventType.js";import{CLASS_COLLAPSED,CLASS_CONTROL,CLASS_UNSELECTABLE}from"../css.js";import{equals}from"../array.js";import{inView}from"../layer/Layer.js";import{removeChildren,replaceNode}from"../dom.js";class Attribution extends Control{constructor(e){const t=e||{};super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const l=void 0!==t.className?t.className:"ol-attribution",s=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:l+"-expand",o=void 0!==t.collapseLabel?t.collapseLabel:"â€º",a=void 0!==t.collapseClassName?t.collapseClassName:l+"-collpase";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const n=void 0!==t.label?t.label:"i";"string"==typeof n?(this.label_=document.createElement("span"),this.label_.textContent=n,this.label_.className=i):this.label_=n;const r=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=s,this.toggleButton_.appendChild(r),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const d=l+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),p=this.element;p.className=d,p.appendChild(this.toggleButton_),p.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t={},l=[];let s=!0;const i=e.layerStatesArray;for(let o=0,a=i.length;o<a;++o){const a=i[o];if(!inView(a,e.viewState))continue;const n=a.layer.getSource();if(!n)continue;const r=n.getAttributions();if(!r)continue;const d=r(e);if(d)if(s=s&&!1!==n.getAttributionsCollapsible(),Array.isArray(d))for(let e=0,s=d.length;e<s;++e)d[e]in t||(l.push(d[e]),t[d[e]]=!0);else d in t||(l.push(d),t[d]=!0)}return this.overrideCollapsible_||this.setCollapsible(s),l}updateElement_(e){if(!e)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const t=this.collectSourceAttributions_(e),l=t.length>0;if(this.renderedVisible_!=l&&(this.element.style.display=l?"":"none",this.renderedVisible_=l),!equals(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let e=0,l=t.length;e<l;++e){const l=document.createElement("li");l.innerHTML=t[e],this.ulElement_.appendChild(l)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,this.collapsible_&&this.collapsed_!==e&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}export default Attribution;
//# sourceMappingURL=/sm/1e779042ec9c7d70d3c53da072fa988dfbbe59d5e5b9ed860e539f1fa931acf5.map
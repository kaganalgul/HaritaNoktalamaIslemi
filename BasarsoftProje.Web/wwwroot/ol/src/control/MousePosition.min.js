/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/control/MousePosition.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Control from"./Control.js";import EventType from"../pointer/EventType.js";import{get as getProjection,getTransformFromProjections,getUserProjection,identityTransform}from"../proj.js";import{listen}from"../events.js";const PROJECTION="projection",COORDINATE_FORMAT="coordinateFormat";class MousePosition extends Control{constructor(t){const e=t||{},o=document.createElement("div");o.className=void 0!==e.className?e.className:"ol-mouse-position",super({element:o,render:e.render,target:e.target}),this.on,this.once,this.un,this.addChangeListener(PROJECTION,this.handleProjectionChanged_),e.coordinateFormat&&this.setCoordinateFormat(e.coordinateFormat),e.projection&&this.setProjection(e.projection);let n=!0,r="&#160;";"undefinedHTML"in e?(void 0!==e.undefinedHTML&&(r=e.undefinedHTML),n=!!r):"placeholder"in e&&(!1===e.placeholder?n=!1:r=String(e.placeholder)),this.placeholder_=r,this.renderOnMouseOut_=n,this.renderedHTML_=o.innerHTML,this.mapProjection_=null,this.transform_=null}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(COORDINATE_FORMAT)}getProjection(){return this.get(PROJECTION)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(listen(e,EventType.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(listen(e,EventType.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(COORDINATE_FORMAT,t)}setProjection(t){this.set(PROJECTION,getProjection(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?getTransformFromProjections(this.mapProjection_,t):identityTransform}const o=this.getMap().getCoordinateFromPixelInternal(t);if(o){const t=getUserProjection();t&&(this.transform_=getTransformFromProjections(this.mapProjection_,t)),this.transform_(o,o);const n=this.getCoordinateFormat();e=n?n(o):o.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}export default MousePosition;
//# sourceMappingURL=/sm/edfe58eb5b0a7722b5dfd1184e5fc082484e5b483323e32b1f9f4c31e8941a48.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/control/ZoomSlider.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Control from"./Control.js";import EventType from"../events/EventType.js";import PointerEventType from"../pointer/EventType.js";import{CLASS_CONTROL,CLASS_UNSELECTABLE}from"../css.js";import{clamp}from"../math.js";import{easeOut}from"../easing.js";import{listen,unlistenByKey}from"../events.js";import{stopPropagation}from"../events/Event.js";const Direction={VERTICAL:0,HORIZONTAL:1};class ZoomSlider extends Control{constructor(t){const e=t||{};super({element:document.createElement("div"),render:e.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=Direction.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==e.duration?e.duration:200;const i=void 0!==e.className?e.className:"ol-zoomslider",s=document.createElement("button");s.setAttribute("type","button"),s.className=i+"-thumb "+CLASS_UNSELECTABLE;const n=this.element;n.className=i+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,n.appendChild(s),n.addEventListener(PointerEventType.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(PointerEventType.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(PointerEventType.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(EventType.CLICK,this.handleContainerClick_.bind(this),!1),s.addEventListener(EventType.CLICK,stopPropagation,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;const s=getComputedStyle(t);e-=parseFloat(s.paddingRight)+parseFloat(s.paddingLeft),i-=parseFloat(s.paddingTop)+parseFloat(s.paddingBottom);const n=t.firstElementChild,o=getComputedStyle(n),r=n.offsetWidth+parseFloat(o.marginRight)+parseFloat(o.marginLeft),a=n.offsetHeight+parseFloat(o.marginTop)+parseFloat(o.marginBottom);return this.thumbSize_=[r,a],e>i?(this.direction_=Direction.HORIZONTAL,this.widthLimit_=e-r):(this.direction_=Direction.VERTICAL,this.heightLimit_=i-a),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),s=this.getResolutionForPosition_(i),n=e.getConstrainedZoom(e.getZoomForResolution(s));e.animateInternal({zoom:n,duration:this.duration_,easing:easeOut})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(listen(i,PointerEventType.POINTERMOVE,t,this),listen(i,PointerEventType.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,i=t.clientY-this.startY_,s=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(s),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0}}setThumbPosition_(t){const e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==Direction.HORIZONTAL?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let i;return i=this.direction_===Direction.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,clamp(i,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return clamp(1-e(t),0,1)}render(t){if(!t.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}export default ZoomSlider;
//# sourceMappingURL=/sm/fcca7a9773cff70c55dcd23a13c49f4030df6d9e8aad2b4c1143ed666d636dba.map
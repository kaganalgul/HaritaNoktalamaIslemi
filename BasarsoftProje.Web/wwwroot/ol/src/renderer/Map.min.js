/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/renderer/Map.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Disposable from"../Disposable.js";import{TRUE}from"../functions.js";import{abstract}from"../util.js";import{compose as composeTransform,makeInverse}from"../transform.js";import{getWidth}from"../extent.js";import{shared as iconImageCache}from"../style/IconImageCache.js";import{inView}from"../layer/Layer.js";import{wrapX}from"../coordinate.js";class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,r){abstract()}calculateMatrices2D(e){const r=e.viewState,t=e.coordinateToPixelTransform,a=e.pixelToCoordinateTransform;composeTransform(t,e.size[0]/2,e.size[1]/2,1/r.resolution,-1/r.resolution,-r.rotation,-r.center[0],-r.center[1]),makeInverse(a,t)}forEachFeatureAtCoordinate(e,r,t,a,o,n,s,i){let c;const l=r.viewState;function m(e,r,t,a){return o.call(n,r,e?t:null,a)}const p=l.projection,f=wrapX(e.slice(),p),h=[[0,0]];if(p.canWrapX()&&a){const e=p.getExtent(),r=getWidth(e);h.push([-r,0],[r,0])}const u=r.layerStatesArray,d=u.length,g=[],C=[];for(let a=0;a<h.length;a++)for(let o=d-1;o>=0;--o){const n=u[o],p=n.layer;if(p.hasRenderer()&&inView(n,l)&&s.call(i,p)){const o=p.getRenderer(),s=p.getSource();if(o&&s){const i=s.getWrapX()?f:e,l=m.bind(null,n.managed);C[0]=i[0]+h[a][0],C[1]=i[1]+h[a][1],c=o.forEachFeatureAtCoordinate(C,r,t,l,g)}if(c)return c}}if(0===g.length)return;const x=1/g.length;return g.forEach(((e,r)=>e.distanceSq+=r*x)),g.sort(((e,r)=>e.distanceSq-r.distanceSq)),g.some((e=>c=e.callback(e.feature,e.layer,e.geometry))),c}forEachLayerAtPixel(e,r,t,a,o){return abstract()}hasFeatureAtCoordinate(e,r,t,a,o,n){return void 0!==this.forEachFeatureAtCoordinate(e,r,t,a,TRUE,this,o,n)}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){iconImageCache.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(e,r){iconImageCache.expire()}export default MapRenderer;
//# sourceMappingURL=/sm/1515c6d4c0653f6de59c0f0e24bd6140ab07bf9dc6dcdbf560731d16864a99da.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/source/ImageStatic.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import EventType from"../events/EventType.js";import ImageSource,{defaultImageLoadFunction}from"./Image.js";import ImageState from"../ImageState.js";import ImageWrapper from"../Image.js";import{IMAGE_SMOOTHING_DISABLED}from"../renderer/canvas/common.js";import{assign}from"../obj.js";import{createCanvasContext2D}from"../dom.js";import{getHeight,getWidth,intersects}from"../extent.js";import{get as getProjection}from"../proj.js";class Static extends ImageSource{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,i=void 0!==t.imageLoadFunction?t.imageLoadFunction:defaultImageLoadFunction;let a=void 0===t.imageSmoothing||t.imageSmoothing;void 0!==t.interpolate&&(a=t.interpolate),super({attributions:t.attributions,interpolate:a,projection:getProjection(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image_=new ImageWrapper(this.imageExtent_,void 0,1,this.url_,e,i),this.imageSize_=t.imageSize?t.imageSize:null,this.image_.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,i,a){return intersects(t,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(t){if(this.image_.getState()==ImageState.LOADED){const t=this.image_.getExtent(),e=this.image_.getImage();let i,a;this.imageSize_?(i=this.imageSize_[0],a=this.imageSize_[1]):(i=e.width,a=e.height);const n=getWidth(t),o=getHeight(t),g=n/i,r=o/a;let m=i,s=a;if(g>r?m=Math.round(n/r):s=Math.round(o/g),m!==i||s!==a){const t=createCanvasContext2D(m,s);this.getInterpolate()||assign(t,IMAGE_SMOOTHING_DISABLED);const n=t.canvas;t.drawImage(e,0,0,i,a,0,0,n.width,n.height),this.image_.setImage(n)}}super.handleImageChange(t)}}export default Static;
//# sourceMappingURL=/sm/ec9e056eae8b6052b0c32a1ab5967a9ad16fc3a44c0edeadcdc7c81117f047cb.map
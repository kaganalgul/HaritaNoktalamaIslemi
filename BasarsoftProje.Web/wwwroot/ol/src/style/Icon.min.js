/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/style/Icon.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import EventType from"../events/EventType.js";import IconAnchorUnits from"./IconAnchorUnits.js";import IconOrigin from"./IconOrigin.js";import ImageState from"../ImageState.js";import ImageStyle from"./Image.js";import{asArray}from"../color.js";import{assert}from"../asserts.js";import{get as getIconImage}from"./IconImage.js";import{getUid}from"../util.js";class Icon extends ImageStyle{constructor(i){const t=i||{},n=void 0!==t.opacity?t.opacity:1,o=void 0!==t.rotation?t.rotation:0,e=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:n,rotation:o,scale:e,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:IconOrigin.TOP_LEFT,this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:IconAnchorUnits.FRACTION,this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:IconAnchorUnits.FRACTION,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const s=void 0!==t.img?t.img:null,c=void 0!==t.imgSize?t.imgSize:null;let h=t.src;assert(!(void 0!==h&&s),4),assert(!s||s&&c,5),void 0!==h&&0!==h.length||!s||(h=s.src||getUid(s)),assert(void 0!==h&&h.length>0,6);const a=void 0!==t.src?ImageState.IDLE:ImageState.LOADED;this.color_=void 0!==t.color?asArray(t.color):null,this.iconImage_=getIconImage(s,h,c,this.crossOrigin_,a,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:IconOrigin.TOP_LEFT,this.origin_=null,this.size_=void 0!==t.size?t.size:null}clone(){const i=this.getScale();return new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,crossOrigin:this.crossOrigin_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,src:this.getSrc(),offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,size:null!==this.size_?this.size_.slice():void 0,opacity:this.getOpacity(),scale:Array.isArray(i)?i.slice():i,rotation:this.getRotation(),rotateWithView:this.getRotateWithView()})}getAnchor(){let i=this.normalizedAnchor_;if(!i){i=this.anchor_;const t=this.getSize();if(this.anchorXUnits_==IconAnchorUnits.FRACTION||this.anchorYUnits_==IconAnchorUnits.FRACTION){if(!t)return null;i=this.anchor_.slice(),this.anchorXUnits_==IconAnchorUnits.FRACTION&&(i[0]*=t[0]),this.anchorYUnits_==IconAnchorUnits.FRACTION&&(i[1]*=t[1])}if(this.anchorOrigin_!=IconOrigin.TOP_LEFT){if(!t)return null;i===this.anchor_&&(i=this.anchor_.slice()),this.anchorOrigin_!=IconOrigin.TOP_RIGHT&&this.anchorOrigin_!=IconOrigin.BOTTOM_RIGHT||(i[0]=-i[0]+t[0]),this.anchorOrigin_!=IconOrigin.BOTTOM_LEFT&&this.anchorOrigin_!=IconOrigin.BOTTOM_RIGHT||(i[1]=-i[1]+t[1])}this.normalizedAnchor_=i}const t=this.getDisplacement();return[i[0]-t[0],i[1]+t[1]]}setAnchor(i){this.anchor_=i,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(i){return this.iconImage_.getImage(i)}getPixelRatio(i){return this.iconImage_.getPixelRatio(i)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let i=this.offset_;if(this.offsetOrigin_!=IconOrigin.TOP_LEFT){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;i=i.slice(),this.offsetOrigin_!=IconOrigin.TOP_RIGHT&&this.offsetOrigin_!=IconOrigin.BOTTOM_RIGHT||(i[0]=n[0]-t[0]-i[0]),this.offsetOrigin_!=IconOrigin.BOTTOM_LEFT&&this.offsetOrigin_!=IconOrigin.BOTTOM_RIGHT||(i[1]=n[1]-t[1]-i[1])}return this.origin_=i,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}listenImageChange(i){this.iconImage_.addEventListener(EventType.CHANGE,i)}load(){this.iconImage_.load()}unlistenImageChange(i){this.iconImage_.removeEventListener(EventType.CHANGE,i)}}export default Icon;
//# sourceMappingURL=/sm/035e015bff42e7c23681f62eab7bd67ef0fa2d7dff57eafa5a012772eec1128d.map
/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/proj.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Projection from"./proj/Projection.js";import Units,{METERS_PER_UNIT}from"./proj/Units.js";import{PROJECTIONS as EPSG3857_PROJECTIONS,fromEPSG4326,toEPSG4326}from"./proj/epsg3857.js";import{PROJECTIONS as EPSG4326_PROJECTIONS}from"./proj/epsg4326.js";import{add as addProj,clear as clearProj,get as getProj}from"./proj/projections.js";import{add as addTransformFunc,clear as clearTransformFuncs,get as getTransformFunc}from"./proj/transforms.js";import{applyTransform,getWidth}from"./extent.js";import{clamp,modulo}from"./math.js";import{getDistance}from"./sphere.js";import{getWorldsAway}from"./coordinate.js";export{METERS_PER_UNIT};export{Projection};export function cloneTransform(r,o,t){let e;if(void 0!==o){for(let t=0,e=r.length;t<e;++t)o[t]=r[t];e=o}else e=r.slice();return e}export function identityTransform(r,o,t){if(void 0!==o&&r!==o){for(let t=0,e=r.length;t<e;++t)o[t]=r[t];r=o}return r}export function addProjection(r){addProj(r.getCode(),r),addTransformFunc(r,r,cloneTransform)}export function addProjections(r){r.forEach(addProjection)}export function get(r){return"string"==typeof r?getProj(r):r||null}export function getPointResolution(r,o,t,e){let n;const s=(r=get(r)).getPointResolutionFunc();if(s){if(n=s(o,t),e&&e!==r.getUnits()){const o=r.getMetersPerUnit();o&&(n=n*o/METERS_PER_UNIT[e])}}else{const s=r.getUnits();if(s==Units.DEGREES&&!e||e==Units.DEGREES)n=o;else{const i=getTransformFromProjections(r,get("EPSG:4326"));if(i===identityTransform&&s!==Units.DEGREES)n=o*r.getMetersPerUnit();else{let r=[t[0]-o/2,t[1],t[0]+o/2,t[1],t[0],t[1]-o/2,t[0],t[1]+o/2];r=i(r,r,2);n=(getDistance(r.slice(0,2),r.slice(2,4))+getDistance(r.slice(4,6),r.slice(6,8)))/2}const c=e?METERS_PER_UNIT[e]:r.getMetersPerUnit();void 0!==c&&(n/=c)}}return n}export function addEquivalentProjections(r){addProjections(r),r.forEach((function(o){r.forEach((function(r){o!==r&&addTransformFunc(o,r,cloneTransform)}))}))}export function addEquivalentTransforms(r,o,t,e){r.forEach((function(r){o.forEach((function(o){addTransformFunc(r,o,t),addTransformFunc(o,r,e)}))}))}export function clearAllProjections(){clearProj(),clearTransformFuncs()}export function createProjection(r,o){return r?"string"==typeof r?get(r):r:get(o)}export function createTransformFromCoordinateTransform(r){return function(o,t,e){const n=o.length,s=void 0!==e?e:2,i=void 0!==t?t:new Array(n);for(let t=0;t<n;t+=s){const e=r([o[t],o[t+1]]);i[t]=e[0],i[t+1]=e[1];for(let r=s-1;r>=2;--r)i[t+r]=o[t+r]}return i}}export function addCoordinateTransforms(r,o,t,e){const n=get(r),s=get(o);addTransformFunc(n,s,createTransformFromCoordinateTransform(t)),addTransformFunc(s,n,createTransformFromCoordinateTransform(e))}export function fromLonLat(r,o){return transform(r,"EPSG:4326",void 0!==o?o:"EPSG:3857")}export function toLonLat(r,o){const t=transform(r,void 0!==o?o:"EPSG:3857","EPSG:4326"),e=t[0];return(e<-180||e>180)&&(t[0]=modulo(e+180,360)-180),t}export function equivalent(r,o){if(r===o)return!0;const t=r.getUnits()===o.getUnits();if(r.getCode()===o.getCode())return t;return getTransformFromProjections(r,o)===cloneTransform&&t}export function getTransformFromProjections(r,o){const t=r.getCode(),e=o.getCode();let n=getTransformFunc(t,e);return n||(n=identityTransform),n}export function getTransform(r,o){return getTransformFromProjections(get(r),get(o))}export function transform(r,o,t){return getTransform(o,t)(r,void 0,r.length)}export function transformExtent(r,o,t,e){const n=getTransform(o,t);return applyTransform(r,n,void 0,e)}export function transformWithProjections(r,o,t){return getTransformFromProjections(o,t)(r)}let userProjection=null;export function setUserProjection(r){userProjection=get(r)}export function clearUserProjection(){userProjection=null}export function getUserProjection(){return userProjection}export function useGeographic(){setUserProjection("EPSG:4326")}export function toUserCoordinate(r,o){return userProjection?transform(r,o,userProjection):r}export function fromUserCoordinate(r,o){return userProjection?transform(r,userProjection,o):r}export function toUserExtent(r,o){return userProjection?transformExtent(r,o,userProjection):r}export function fromUserExtent(r,o){return userProjection?transformExtent(r,userProjection,o):r}export function toUserResolution(r,o){if(!userProjection)return r;const t=get(o).getUnits(),e=userProjection.getUnits();return t&&e?r*METERS_PER_UNIT[t]/METERS_PER_UNIT[e]:r}export function fromUserResolution(r,o){if(!userProjection)return r;const t=get(o).getUnits(),e=userProjection.getUnits();return t&&e?r*METERS_PER_UNIT[e]/METERS_PER_UNIT[t]:r}export function createSafeCoordinateTransform(r,o,t){return function(e){let n,s,i=e[0],c=e[1];if(r.canWrapX()){const o=r.getExtent(),a=getWidth(o);s=getWorldsAway(e,r,a),s&&(i-=s*a),i=clamp(i,o[0],o[2]),c=clamp(c,o[1],o[3]),n=t([i,c])}else n=t(e);return s&&o.canWrapX()&&(n[0]+=s*getWidth(o.getExtent())),n}}export function addCommon(){addEquivalentProjections(EPSG3857_PROJECTIONS),addEquivalentProjections(EPSG4326_PROJECTIONS),addEquivalentTransforms(EPSG4326_PROJECTIONS,EPSG3857_PROJECTIONS,fromEPSG4326,toEPSG4326)}addCommon();
//# sourceMappingURL=/sm/12dc3607896dcab0795caf5cd35e7802a035763ef45e21a7c7c70bd248f80727.map
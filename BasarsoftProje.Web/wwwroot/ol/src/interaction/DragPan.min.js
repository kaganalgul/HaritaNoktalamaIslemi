/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/ol@6.12.0/src/interaction/DragPan.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import PointerInteraction,{centroid as centroidFromPointers}from"./Pointer.js";import{FALSE}from"../functions.js";import{all,focusWithTabindex,noModifierKeys,primaryAction}from"../events/condition.js";import{easeOut}from"../easing.js";import{rotate as rotateCoordinate,scale as scaleCoordinate}from"../coordinate.js";class DragPan extends PointerInteraction{constructor(t){super({stopDown:FALSE});const i=t||{};this.kinetic_=i.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=i.condition?i.condition:all(noModifierKeys,primaryAction);this.condition_=i.onFocusOnly?all(focusWithTabindex,n):n,this.noKinetic_=!1}handleDragEvent(t){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());const i=this.targetPointers,n=centroidFromPointers(i);if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const i=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],e=t.map.getView();scaleCoordinate(i,e.getResolution()),rotateCoordinate(i,e.getRotation()),e.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const i=t.map,n=i.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),e=this.kinetic_.getAngle(),o=n.getCenterInternal(),s=i.getPixelFromCoordinateInternal(o),r=i.getCoordinateFromPixelInternal([s[0]-t*Math.cos(e),s[1]-t*Math.sin(e)]);n.animateInternal({center:n.getConstrainedCenter(r),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}export default DragPan;
//# sourceMappingURL=/sm/90a0e345fd281f66394d7d8e69f260c8a7fd4fa69ef4ab97b9f48ff38d5a3843.map